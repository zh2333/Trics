# 设计模式

### 1.单例模式
- 模式定义

    保证一个类只有一个实例, 并且提供一个全局访问点
    
- 场景

    重量级的对象, 不需要多个实例, 如线程池, 数据库连接池

- 类图

    ![image-20201025140425792](E:\Trics\designPattern\pic\image-20201025140425792.png)

* 单例模式的实现方式

  1. 懒汉模式: 延迟加载, 只有在真正使用的时候才开始实例化

     * 线程安全问题
     * double check 加锁优化
     * 编译器, CPU有可能对指令进行重排序, 导致使用到尚未出书画的实例, 可以通过太黏volatile关键字进行装饰, 对于volatile修饰的资源, 可以防止指令重排

  2. 饿汉模式: 类加载阶段就完成了实例的初始化.本质上就是借助jvm类加载机制, 保证实例的唯一性

     * 类加载过程:

       1) 加载二进制数据到内存中, 生成对应的class数据结构

       2) 连接 : a.验证 b.准备(给类的惊天成员变量赋默认值) c.解析

       3) 初始化: 给类的静态变量赋初始值

  3. 静态内部类

     * 本质上利用类的加载机制来保证线程安全
     * 只有在实际使用的时候才会触发类的初始化, 所以也是懒加载的一种形式

  4. 枚举类型

     * 天然不支持反射创建对应的实例, 且有着自己的反序列化机制
     * 利用类加载机制保证线程安全

  5. 序列化

     * 可以利用指定方法来替换从反序列化流中的数据



### 2.工厂方法模式

* 模式定义

  定义一个用于创建对象的接口, 让自雷决定实例化哪一个类.Factory Method是的一个类的实例化延迟到子类

* 符合开闭原则和单一职责原则

* 应用场景

  1. 当你不知道你要使用的对象的确切类型的时候
  2. 当你希望为库或者框架提供展示其内部组件的方法时

* 主要优点

  1. 将具体产品和创建者解耦
  2. 符合单一职责原则
  3. 符合开闭原则



### 3.抽象工厂模式

* 模式定义

  提供一个创建一系列相关或互相依赖对象的接口, 而无需指定他们的具体的类

* 应用场景

  程序需要处理不同系列的相关产品, 但是不希望他们依赖于这些产品的具体类时

* 优点

  符合单一职责原则

  符合开闭原则



### 4.建造者模式

* 模式定义

* 类图

  ![image-20201025154046218](E:\Trics\designPattern\pic\image-20201025154046218.png)



### 5.原型模式

* 模型定义: 原型实例指定创建对象的种类, 并且通过拷贝这些原型创建新的对象

* 应用场景

  当代码不应该依赖于需要复制的对象的具体类时, 使用原型模式

* 优点

  可以不耦合具体类的情况下克隆对象

  避免重复的初始化代码

  更方便的构建复杂对象





### 6.享元模式

* 模式定义

  运用共享技术有效的支持大量细粒度的对象

* 优点

  如果系统有大量类似的对象, 可以节省大量的内存和CPU资源



### 7.门面模式

* 模式定义

* =为子系统中的一组接口提供一个一致的接口, Facade模式定义了一个高层接口, 和这个接口使得这一子系统更加容易使用

* 类图

  ![image-20201025171152743](E:\Trics\designPattern\pic\image-20201025171152743.png)

* 应用场景

  需要使用复杂子系统的优先但是直接的接口时

  需要将子系统组织成层时

* 优点

  简化客户端的调用



### 8.适配器模式

* 模式定义

  将一个类的接口转换成客户希望的另一个接口.适配器模式使得原本由于接口不兼容而不能一起工作的接口可以一起工作

* 类图

  ![image-20201025172549063](E:\Trics\designPattern\pic\image-20201025172549063.png)

  对象适配器模式使用的是组合, 类适配器模式使用的是继承

* 应用场景

  希望使用某些现有类, 但是其他接口与你的其他代码不兼容时, 使用适配器模式

  希望重用几个现有的子类, 这些子类缺少一些不能添加到超类中的公共功能时

* 优点

  符合单一职责原则

  符合开闭原则



### 9装饰者模式

* 模式定义

  在不改变原有对象的基础上, 将功能附加到对象上

* 类图

  ![image-20201025174427922](E:\Trics\designPattern\pic\image-20201025174427922.png)